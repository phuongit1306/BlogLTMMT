<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Bài 5 - Giao tiếp hai chiều trong Java bằng Socket (Chat Realtime) | Blog Lập Trình - 2180607911 - Nguyễn Thanh Phương - 21DTHD3</title><meta name=keywords content="Java,Socket,Chat,Realtime,Đa luồng"><meta name=description content="Trong các bài trước, ta đã học cách:

Kết nối Client ↔ Server bằng Socket.
Gửi và nhận dữ liệu một chiều (Client gửi, Server nhận).
Truyền file qua mạng.

👉 Trong bài này, chúng ta sẽ nâng cấp:
Cả hai bên đều có thể gửi & nhận tin nhắn cùng lúc — tức là giao tiếp hai chiều (bidirectional communication), như một ứng dụng chat cơ bản.

🧩 1. Kiến thức nền tảng
⚙️ Mô hình hoạt động

  
      
          Thành phần
          Mô tả
      
  
  
      
          ServerSocket
          Server lắng nghe yêu cầu kết nối
      
      
          Socket
          Cầu nối giữa 2 bên
      
      
          InputStream / OutputStream
          Dùng để đọc & gửi dữ liệu
      
      
          Thread
          Tạo luồng riêng cho việc nhận tin nhắn để tránh bị chặn chương trình
      
  

📸 Minh họa hoạt động chat song công:
"><meta name=author content="Nguyễn Thanh Phương"><link rel=canonical href=https://phuongit1306.github.io/BlogLTMMT/blog/bai5-giao-tiep-hai-chieu-trong-java/><link crossorigin=anonymous href=/BlogLTMMT/assets/css/stylesheet.a482bf00fa5c046040ef7973ad5fdf5657890cacb596c93f1382f664ca542074.css integrity="sha256-pIK/APpcBGBA73lzrV/fVleJDKy1lsk/E4L2ZMpUIHQ=" rel="preload stylesheet" as=style><link rel=icon href=https://phuongit1306.github.io/BlogLTMMT/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://phuongit1306.github.io/BlogLTMMT/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://phuongit1306.github.io/BlogLTMMT/favicon-32x32.png><link rel=apple-touch-icon href=https://phuongit1306.github.io/BlogLTMMT/apple-touch-icon.png><link rel=mask-icon href=https://phuongit1306.github.io/BlogLTMMT/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://phuongit1306.github.io/BlogLTMMT/blog/bai5-giao-tiep-hai-chieu-trong-java/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://phuongit1306.github.io/BlogLTMMT/blog/bai5-giao-tiep-hai-chieu-trong-java/"><meta property="og:site_name" content="Blog Lập Trình - 2180607911 - Nguyễn Thanh Phương - 21DTHD3"><meta property="og:title" content="Bài 5 - Giao tiếp hai chiều trong Java bằng Socket (Chat Realtime)"><meta property="og:description" content="Trong các bài trước, ta đã học cách:
Kết nối Client ↔ Server bằng Socket. Gửi và nhận dữ liệu một chiều (Client gửi, Server nhận). Truyền file qua mạng. 👉 Trong bài này, chúng ta sẽ nâng cấp:
Cả hai bên đều có thể gửi & nhận tin nhắn cùng lúc — tức là giao tiếp hai chiều (bidirectional communication), như một ứng dụng chat cơ bản.
🧩 1. Kiến thức nền tảng ⚙️ Mô hình hoạt động Thành phần Mô tả ServerSocket Server lắng nghe yêu cầu kết nối Socket Cầu nối giữa 2 bên InputStream / OutputStream Dùng để đọc & gửi dữ liệu Thread Tạo luồng riêng cho việc nhận tin nhắn để tránh bị chặn chương trình 📸 Minh họa hoạt động chat song công: "><meta property="og:locale" content="vi"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2025-10-09T00:00:00+00:00"><meta property="article:modified_time" content="2025-10-09T00:00:00+00:00"><meta property="article:tag" content="Java"><meta property="article:tag" content="Socket"><meta property="article:tag" content="Chat"><meta property="article:tag" content="Realtime"><meta property="article:tag" content="Đa Luồng"><meta name=twitter:card content="summary"><meta name=twitter:title content="Bài 5 - Giao tiếp hai chiều trong Java bằng Socket (Chat Realtime)"><meta name=twitter:description content="Trong các bài trước, ta đã học cách:

Kết nối Client ↔ Server bằng Socket.
Gửi và nhận dữ liệu một chiều (Client gửi, Server nhận).
Truyền file qua mạng.

👉 Trong bài này, chúng ta sẽ nâng cấp:
Cả hai bên đều có thể gửi & nhận tin nhắn cùng lúc — tức là giao tiếp hai chiều (bidirectional communication), như một ứng dụng chat cơ bản.

🧩 1. Kiến thức nền tảng
⚙️ Mô hình hoạt động

  
      
          Thành phần
          Mô tả
      
  
  
      
          ServerSocket
          Server lắng nghe yêu cầu kết nối
      
      
          Socket
          Cầu nối giữa 2 bên
      
      
          InputStream / OutputStream
          Dùng để đọc & gửi dữ liệu
      
      
          Thread
          Tạo luồng riêng cho việc nhận tin nhắn để tránh bị chặn chương trình
      
  

📸 Minh họa hoạt động chat song công:
"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blog - Lập trình mạng máy tính","item":"https://phuongit1306.github.io/BlogLTMMT/blog/"},{"@type":"ListItem","position":2,"name":"Bài 5 - Giao tiếp hai chiều trong Java bằng Socket (Chat Realtime)","item":"https://phuongit1306.github.io/BlogLTMMT/blog/bai5-giao-tiep-hai-chieu-trong-java/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Bài 5 - Giao tiếp hai chiều trong Java bằng Socket (Chat Realtime)","name":"Bài 5 - Giao tiếp hai chiều trong Java bằng Socket (Chat Realtime)","description":"Trong các bài trước, ta đã học cách:\nKết nối Client ↔ Server bằng Socket. Gửi và nhận dữ liệu một chiều (Client gửi, Server nhận). Truyền file qua mạng. 👉 Trong bài này, chúng ta sẽ nâng cấp:\nCả hai bên đều có thể gửi \u0026amp; nhận tin nhắn cùng lúc — tức là giao tiếp hai chiều (bidirectional communication), như một ứng dụng chat cơ bản.\n🧩 1. Kiến thức nền tảng ⚙️ Mô hình hoạt động Thành phần Mô tả ServerSocket Server lắng nghe yêu cầu kết nối Socket Cầu nối giữa 2 bên InputStream / OutputStream Dùng để đọc \u0026amp; gửi dữ liệu Thread Tạo luồng riêng cho việc nhận tin nhắn để tránh bị chặn chương trình 📸 Minh họa hoạt động chat song công: ","keywords":["Java","Socket","Chat","Realtime","Đa luồng"],"articleBody":"Trong các bài trước, ta đã học cách:\nKết nối Client ↔ Server bằng Socket. Gửi và nhận dữ liệu một chiều (Client gửi, Server nhận). Truyền file qua mạng. 👉 Trong bài này, chúng ta sẽ nâng cấp:\nCả hai bên đều có thể gửi \u0026 nhận tin nhắn cùng lúc — tức là giao tiếp hai chiều (bidirectional communication), như một ứng dụng chat cơ bản.\n🧩 1. Kiến thức nền tảng ⚙️ Mô hình hoạt động Thành phần Mô tả ServerSocket Server lắng nghe yêu cầu kết nối Socket Cầu nối giữa 2 bên InputStream / OutputStream Dùng để đọc \u0026 gửi dữ liệu Thread Tạo luồng riêng cho việc nhận tin nhắn để tránh bị chặn chương trình 📸 Minh họa hoạt động chat song công: 🧱 2. Ý tưởng Khi Client kết nối tới Server: Server tạo một luồng riêng để nhận tin nhắn từ Client. Ngược lại, Client cũng có luồng riêng để nhận tin từ Server. Người dùng có thể nhập tin nhắn (trong console) để gửi đi mà không bị chặn bởi việc nhận tin nhắn. 💬 3. Code ví dụ: Chat hai chiều đơn giản 🖥️ Server (ChatServer.java) import java.io.*; import java.net.*; public class ChatServer { public static void main(String[] args) { int port = 5000; try (ServerSocket serverSocket = new ServerSocket(port)) { System.out.println(\"💬 Server đang chạy, chờ Client kết nối...\"); Socket socket = serverSocket.accept(); System.out.println(\"✅ Client đã kết nối: \" + socket.getInetAddress()); // Luồng nhận tin từ Client new Thread(() -\u003e { try { BufferedReader reader = new BufferedReader(new InputStreamReader(socket.getInputStream())); String message; while ((message = reader.readLine()) != null) { System.out.println(\"👤 Client: \" + message); } } catch (IOException e) { System.out.println(\"❌ Mất kết nối với Client!\"); } }).start(); // Luồng gửi tin tới Client PrintWriter writer = new PrintWriter(socket.getOutputStream(), true); BufferedReader console = new BufferedReader(new InputStreamReader(System.in)); String input; while ((input = console.readLine()) != null) { writer.println(input); } } catch (IOException e) { e.printStackTrace(); } } } 🖥️ Client (ChatClient.java) import java.io.*; import java.net.*; public class ChatClient { public static void main(String[] args) { String host = \"localhost\"; int port = 5000; try (Socket socket = new Socket(host, port)) { System.out.println(\"🔗 Đã kết nối đến server!\"); // Luồng nhận tin từ Server new Thread(() -\u003e { try { BufferedReader reader = new BufferedReader(new InputStreamReader(socket.getInputStream())); String message; while ((message = reader.readLine()) != null) { System.out.println(\"💻 Server: \" + message); } } catch (IOException e) { System.out.println(\"❌ Mất kết nối với Server!\"); } }).start(); // Luồng gửi tin đến Server PrintWriter writer = new PrintWriter(socket.getOutputStream(), true); BufferedReader console = new BufferedReader(new InputStreamReader(System.in)); String input; while ((input = console.readLine()) != null) { writer.println(input); } } catch (IOException e) { e.printStackTrace(); } } } 🧠 4. Giải thích\nBước Hoạt động 1️⃣ Server tạo ServerSocket và chờ kết nối 2️⃣ Client kết nối đến Server 3️⃣ Mỗi bên tạo một luồng riêng để nhận dữ liệu liên tục 4️⃣ Người dùng nhập tin nhắn trên console → gửi đi 5️⃣ Luồng nhận sẽ hiển thị tin nhắn từ bên kia Nhờ có đa luồng, chương trình không bị “treo” khi chờ dữ liệu.\n✍️ Tác giả: Nguyễn Thanh Phương\n📅 Cập nhật: October 19, 2025\n","wordCount":"530","inLanguage":"en","datePublished":"2025-10-09T00:00:00Z","dateModified":"2025-10-09T00:00:00Z","author":{"@type":"Person","name":"Nguyễn Thanh Phương"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://phuongit1306.github.io/BlogLTMMT/blog/bai5-giao-tiep-hai-chieu-trong-java/"},"publisher":{"@type":"Organization","name":"Blog Lập Trình - 2180607911 - Nguyễn Thanh Phương - 21DTHD3","logo":{"@type":"ImageObject","url":"https://phuongit1306.github.io/BlogLTMMT/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://phuongit1306.github.io/BlogLTMMT/ accesskey=h title="Blog Lập Trình - 2180607911 - Nguyễn Thanh Phương - 21DTHD3 (Alt + H)">Blog Lập Trình - 2180607911 - Nguyễn Thanh Phương - 21DTHD3</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://phuongit1306.github.io/BlogLTMMT/ title=Home><span>Home</span></a></li><li><a href=https://phuongit1306.github.io/BlogLTMMT/blog title=📝><span>📝</span></a></li><li><a href=https://phuongit1306.github.io/BlogLTMMT/about title=📩><span>📩</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://phuongit1306.github.io/BlogLTMMT/>Home</a>&nbsp;»&nbsp;<a href=https://phuongit1306.github.io/BlogLTMMT/blog/>Blog - Lập trình mạng máy tính</a></div><h1 class="post-title entry-hint-parent">Bài 5 - Giao tiếp hai chiều trong Java bằng Socket (Chat Realtime)</h1><div class=post-meta><span title='2025-10-09 00:00:00 +0000 UTC'>October 9, 2025</span>&nbsp;·&nbsp;<span>3 min</span>&nbsp;·&nbsp;<span>Nguyễn Thanh Phương</span></div></header><div class=post-content><p>Trong các bài trước, ta đã học cách:</p><ul><li>Kết nối Client ↔ Server bằng Socket.</li><li>Gửi và nhận dữ liệu một chiều (Client gửi, Server nhận).</li><li>Truyền file qua mạng.</li></ul><p>👉 Trong bài này, chúng ta sẽ nâng cấp:<br><strong>Cả hai bên đều có thể gửi & nhận tin nhắn cùng lúc</strong> — tức là <strong>giao tiếp hai chiều (bidirectional communication)</strong>, như một ứng dụng chat cơ bản.</p><hr><h2 id=-1-kiến-thức-nền-tảng>🧩 1. Kiến thức nền tảng<a hidden class=anchor aria-hidden=true href=#-1-kiến-thức-nền-tảng>#</a></h2><h3 id=-mô-hình-hoạt-động>⚙️ Mô hình hoạt động<a hidden class=anchor aria-hidden=true href=#-mô-hình-hoạt-động>#</a></h3><table><thead><tr><th>Thành phần</th><th>Mô tả</th></tr></thead><tbody><tr><td><code>ServerSocket</code></td><td>Server lắng nghe yêu cầu kết nối</td></tr><tr><td><code>Socket</code></td><td>Cầu nối giữa 2 bên</td></tr><tr><td><code>InputStream / OutputStream</code></td><td>Dùng để đọc & gửi dữ liệu</td></tr><tr><td><code>Thread</code></td><td>Tạo luồng riêng cho việc <strong>nhận tin nhắn</strong> để tránh bị chặn chương trình</td></tr></tbody></table><p>📸 <em>Minh họa hoạt động chat song công:</em>
<img alt="Java Chat Diagram" loading=lazy src=../images/java-chat-diagram.png></p><hr><h2 id=-2-ý-tưởng>🧱 2. Ý tưởng<a hidden class=anchor aria-hidden=true href=#-2-ý-tưởng>#</a></h2><ul><li>Khi Client kết nối tới Server:<ul><li>Server tạo một <strong>luồng riêng</strong> để nhận tin nhắn từ Client.</li><li>Ngược lại, Client cũng có luồng riêng để nhận tin từ Server.</li></ul></li><li>Người dùng có thể nhập tin nhắn (trong console) để gửi đi <strong>mà không bị chặn</strong> bởi việc nhận tin nhắn.</li></ul><hr><h2 id=-3-code-ví-dụ-chat-hai-chiều-đơn-giản>💬 3. Code ví dụ: Chat hai chiều đơn giản<a hidden class=anchor aria-hidden=true href=#-3-code-ví-dụ-chat-hai-chiều-đơn-giản>#</a></h2><h3 id=-server-chatserverjava>🖥️ Server (ChatServer.java)<a hidden class=anchor aria-hidden=true href=#-server-chatserverjava>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> java.io.*;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.net.*;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ChatServer</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> port <span style=color:#f92672>=</span> 5000;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> (ServerSocket serverSocket <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ServerSocket(port)) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;💬 Server đang chạy, chờ Client kết nối...&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            Socket socket <span style=color:#f92672>=</span> serverSocket.<span style=color:#a6e22e>accept</span>();
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;✅ Client đã kết nối: &#34;</span> <span style=color:#f92672>+</span> socket.<span style=color:#a6e22e>getInetAddress</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Luồng nhận tin từ Client</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>new</span> Thread(() <span style=color:#f92672>-&gt;</span> {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>                    BufferedReader reader <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> BufferedReader(<span style=color:#66d9ef>new</span> InputStreamReader(socket.<span style=color:#a6e22e>getInputStream</span>()));
</span></span><span style=display:flex><span>                    String message;
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>while</span> ((message <span style=color:#f92672>=</span> reader.<span style=color:#a6e22e>readLine</span>()) <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>                        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;👤 Client: &#34;</span> <span style=color:#f92672>+</span> message);
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                } <span style=color:#66d9ef>catch</span> (IOException e) {
</span></span><span style=display:flex><span>                    System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;❌ Mất kết nối với Client!&#34;</span>);
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }).<span style=color:#a6e22e>start</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Luồng gửi tin tới Client</span>
</span></span><span style=display:flex><span>            PrintWriter writer <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PrintWriter(socket.<span style=color:#a6e22e>getOutputStream</span>(), <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>            BufferedReader console <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> BufferedReader(<span style=color:#66d9ef>new</span> InputStreamReader(System.<span style=color:#a6e22e>in</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            String input;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>while</span> ((input <span style=color:#f92672>=</span> console.<span style=color:#a6e22e>readLine</span>()) <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>                writer.<span style=color:#a6e22e>println</span>(input);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>catch</span> (IOException e) {
</span></span><span style=display:flex><span>            e.<span style=color:#a6e22e>printStackTrace</span>();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=-client-chatclientjava>🖥️ Client (ChatClient.java)<a hidden class=anchor aria-hidden=true href=#-client-chatclientjava>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> java.io.*;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.net.*;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ChatClient</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>        String host <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;localhost&#34;</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> port <span style=color:#f92672>=</span> 5000;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> (Socket socket <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Socket(host, port)) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;🔗 Đã kết nối đến server!&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Luồng nhận tin từ Server</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>new</span> Thread(() <span style=color:#f92672>-&gt;</span> {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>                    BufferedReader reader <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> BufferedReader(<span style=color:#66d9ef>new</span> InputStreamReader(socket.<span style=color:#a6e22e>getInputStream</span>()));
</span></span><span style=display:flex><span>                    String message;
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>while</span> ((message <span style=color:#f92672>=</span> reader.<span style=color:#a6e22e>readLine</span>()) <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>                        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;💻 Server: &#34;</span> <span style=color:#f92672>+</span> message);
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                } <span style=color:#66d9ef>catch</span> (IOException e) {
</span></span><span style=display:flex><span>                    System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;❌ Mất kết nối với Server!&#34;</span>);
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }).<span style=color:#a6e22e>start</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Luồng gửi tin đến Server</span>
</span></span><span style=display:flex><span>            PrintWriter writer <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PrintWriter(socket.<span style=color:#a6e22e>getOutputStream</span>(), <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>            BufferedReader console <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> BufferedReader(<span style=color:#66d9ef>new</span> InputStreamReader(System.<span style=color:#a6e22e>in</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            String input;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>while</span> ((input <span style=color:#f92672>=</span> console.<span style=color:#a6e22e>readLine</span>()) <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>                writer.<span style=color:#a6e22e>println</span>(input);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>catch</span> (IOException e) {
</span></span><span style=display:flex><span>            e.<span style=color:#a6e22e>printStackTrace</span>();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><p>🧠 4. Giải thích</p><table><thead><tr><th>Bước</th><th>Hoạt động</th></tr></thead><tbody><tr><td>1️⃣</td><td>Server tạo <code>ServerSocket</code> và chờ kết nối</td></tr><tr><td>2️⃣</td><td>Client kết nối đến Server</td></tr><tr><td>3️⃣</td><td>Mỗi bên tạo một luồng riêng để <strong>nhận dữ liệu liên tục</strong></td></tr><tr><td>4️⃣</td><td>Người dùng nhập tin nhắn trên console → gửi đi</td></tr><tr><td>5️⃣</td><td>Luồng nhận sẽ hiển thị tin nhắn từ bên kia</td></tr></tbody></table><p>Nhờ có đa luồng, chương trình không bị &ldquo;treo&rdquo; khi chờ dữ liệu.</p><hr><p>✍️ Tác giả: Nguyễn Thanh Phương</p><p>📅 Cập nhật: October 19, 2025</p><hr></div><footer class=post-footer><ul class=post-tags><li><a href=https://phuongit1306.github.io/BlogLTMMT/tags/java/>Java</a></li><li><a href=https://phuongit1306.github.io/BlogLTMMT/tags/socket/>Socket</a></li><li><a href=https://phuongit1306.github.io/BlogLTMMT/tags/chat/>Chat</a></li><li><a href=https://phuongit1306.github.io/BlogLTMMT/tags/realtime/>Realtime</a></li><li><a href=https://phuongit1306.github.io/BlogLTMMT/tags/%C4%91a-lu%E1%BB%93ng/>Đa Luồng</a></li></ul><nav class=paginav><a class=prev href=https://phuongit1306.github.io/BlogLTMMT/blog/bai6-xay-dung-chat-server-nhieu-nguoi-dung/><span class=title>« Prev</span><br><span>Bài 6 - Xây dựng Chat Server nhiều người dùng (Multi-Client Chat)</span>
</a><a class=next href=https://phuongit1306.github.io/BlogLTMMT/blog/bai4-truyen-file-qua-mang-trong-java/><span class=title>Next »</span><br><span>Bài 4 - Truyền file qua mạng trong Java bằng Socket</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://phuongit1306.github.io/BlogLTMMT/>Blog Lập Trình - 2180607911 - Nguyễn Thanh Phương - 21DTHD3</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>